<!-- 
    index.html

    Author: Alex Badia
    Description: This is the main landing page for the Nightingale Compiler.

    Note: I've learned from Operating Systems and I am coming back stronger (and more professional).
 -->

<!DOCTYPE HTML>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <meta name="author" content="Alex Badia" />

    <title>Nightingale - a browser-based virtual Compiler in TypeScript</title>

    <!-- Personal stylesheet, bootstrap is too "cookie cutterish" -->
    <link rel="stylesheet" href="css/style.css">

    <!-- jQuery, 1st time btw -->
    <link rel="stylesheet" href="plugins/jquery/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <!-- Bootstrap, also 1st time btw -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">

    <!-- Code Mirror, wow apparently many people us this including Adobe, codepen, Go, emmet, and more! -->
    <script src="plugins/codemirror-5.59.3/lib/codemirror.js"></script>
    <link rel="stylesheet" href="plugins/codemirror-5.59.3/lib/codemirror.css">
    <script src="plugins/codemirror-5.59.3/mode/javascript/javascript.js"></script>

    <!-- Compiler -->
    <script type="text/javascript" src="../../distrib//global.js"></script>
    <script type="text/javascript" src="../../distrib/controller/compiler_controller/compiler_controller.js"></script>
    <script type="text/javascript" src="../../distrib/controller/compiler_controller/lexer.js"></script>
    <script type="text/javascript" src="../../distrib/controller/compiler_controller/parser.js"></script>

    <!-- Models -->
    <script type="text/javascript" src="../../distrib/model/lexical_token_model.js"></script>
    <script type="text/javascript" src="../../distrib/model/debug_console_model.js"></script>
    <script type="text/javascript" src="../../distrib/model/stacktrace_console_model.js"></script>


    <!-- Automatic Tests -->
    <script type="text/javascript" src="../../tests/default_tests.js"></script>
    <!-- <script type="text/javascript" src="http://alanclasses.github.io/TSOS/test/glados-ip4.js"></script> -->
</head>

<body id='body'>

    <nav id="navbar" class="navbar navbar-default navbar-fixed-top navbar-inverse">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                </button><!-- <button> -->

                <a class="navbar-brand" href="#" style="width: auto; padding-top: 5px;">
                    <img src="images/nightingale_logo.png" id="nightingale_logo" alt="Responsive image">
                    <h3 id="title"> Nightingale </h1>
                </a>
            </div><!-- <div class="navbar-header"> -->

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1"
                style="position: absolute; left: 0; width: 85%;">
                <ul class="nav navbar-nav navbar-right" style="margin-right: 0; margin-top: -.5%;">
                    <li role="presentation">
                        <a id="compile-button" onclick="NightingaleCompiler.CompilerController.compilerControllerBtnCompile_click(myCodeMirror.getValue());">
                            <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor"
                                class="bi bi-play-fill" viewBox="0 0 16 16">
                                <path
                                    d="M11.596 8.697l-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z" />
                            </svg>
                        </a>
                    </li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

    <div id="main">

        <!-- Sidebar to reveal test files -->
        <div id="sidebar">
            <div class="d-flex flex-column mt-3">
                <div class="d-flex justify-content-center">
                    <a id="sidebar__link">
                        <span class="glyphicon glyphicon-folder-open" aria-hidden="false"></span>
                    </a>
                </div>
            </div>
        </div>

        <!-- lists all test files -->
        <div id="side-nav">
            Tests
        </div>
        <!--<div id="side-nav"> -->

        <div id='code-editor'>
            <!-- Code Mirror is Appended Here! -->
        </div>

        <!-- Draggable Output Console -->
        <div id="console" style="overflow: hidden;">
            <ul id='bootstrap-override-nav-tabs' class="nav nav-tabs">
                <li class=" console__tab-verbose active"><a class='output-anchor' data-toggle="tab" href="#verbose">Verbose</a></li>
                <li class=" console__tab-debug"><a class='output-anchor' data-toggle="tab" href="#debug_console">Debug</a></li>
                <li class=" console__tab-stacktrace"><a class='output-anchor' data-toggle="tab" href="#stacktrace_console">Stacktrace</a></li>
                <li class=" console__tab-cst"><a class='output-anchor' data-toggle="tab" href="#cst">CST</a></li>
                <li class=" console__tab-ast"><a class='output-anchor' data-toggle="tab" href="#ast">AST</a></li>
                <li class=" console__tab-terminal"><a class='output-anchor' data-toggle="tab" href="#terminal">TERMINAL</a></li>
            </ul>
            <!--<ul ul id='bootstrap-override-nav-tabs' class="nav nav-tabs"> -->

            <div class="tab-content" style = "height: 100%; width: 100%; overflow: scroll;">

                <div id="verbose" class="tab-content_tab-verbose tab-pane fade in active">
                    <p>Verbose Console</p>
                </div>

                <div id="debug_console" class="tab-content_tab-debug tab-pane fade">
                    <div id = "debug_console_list" class = "list-group">
                        <!-- List of Emmitted Tokens -->
                    </div>
                </div>

                <div id="stacktrace_console" class="tab-content_tab-stacktrace tab-pane fade">
                    <div id = "stacktrace_console_list" class = "list-group">
                        <!-- List of Emmitted Tokens -->
                    </div>
                </div>

                <div id="cst" class=" tab-content_tab-cst tab-pane fade">
                    <p>CST goes here.</p>
                </div>
                <!--<dive id = "cst"> -->

                <div id="ast" class="tab-content_tab-ast tab-pane fade">
                    <p>AST goes here.</p>
                </div>
                <!--<dive id = "ast"> -->

                <div id="terminal" class="tab-content_tab-terminal tab-pane fade">
                    <p>AxiOS?</p>
                </div>
                <!--<dive id = "terminal"> -->
            </div>
            <!--<dive id = "tab-content"> -->
        </div>
        <!--<dive id = "console"> -->
    </div>
    <!--<dive id = "main"> -->
</body>

<!-- Footer -->
<div id="footer">
    <div class="d-flex p-2" style="position: relative; top: -35%;">
        <div class="p-2" style="width: 3%"></div>
        <div class="p-2">Errors: 0 </div>
        <div class="p-2" style="width: .5%"></div>
        <div class="p-2">Warnings: 0</div>
        <div class="p-2" style="width: .5%"></div>

        <div class="p-2 flex-grow-1"></div>

        <div class="p-2">Line: #, Column: #</div>
        <div class="p-2" style="width: .5%"></div>
        <div class="p-2">Encoding: UTF-8 </div>
        <div class="p-2" style="width: .5%"></div>
        <div class="p-2">Mode: Alans Language</div>
        <div class="p-2" style="width: 5%"></div>
    </div><!-- <div id="footer"> -->
</div><!-- <div class="d-flex p-2"> -->

<!-- Code Mirror script -->
<script>

    // Create a Code Mirror Text Area
    var myCodeMirror = CodeMirror(

        // Append to DOM
        document.getElementById("code-editor"),

        // Attributes
        {
            value: LONG_TEST_CASE,

            // Perhaps, don't let reader edit code while compiling
            readOnly: false,

            /*
            * Whether to show line numbers to the left of the editor.
            *
            * Defaults to false.
            */
            lineNumbers: true,

            /* 
            * Whether CodeMirror should scroll or wrap for long lines. 
            *
            * Defaults to false, so overflown content will automatically scroll.
            */
            lineWrapping: false,

            /* 
            * The language CodeMirror uses to lex and parse.
            *
            * See codemirror-5.59.3/mode/ for languages. A non existent language results in no lexing or parsing.
            */
            mode: "something",
        }
    );
</script>

<!-- Reactive UI Changes Script -->
<script>
    // Resize Side Navigation
    $('#side-nav').resizable({
        // north, east, south, west sides of a div
        handles: 'e',

        // Horizantal Boundaries
        minWidth: 0,
        maxWidth: screen.width * .8,
    });

    // Resize Code Editor and Console
    $('#code-editor').resizable({

        // north, east, south, west sides of a div
        handles: 's',

        // Vertical Boundaries
        minHeight: screen.height * .1,
        maxHeight: screen.height * .8,
    });

    // Reveal test files
    $("#sidebar__link").click(function () {
        // Change color
        // $("#sidebar__link").css({ "color": "white" });

        // Open Navigiator
        $('#side-nav').width(screen.width * .15);
    });

</script>

</html>